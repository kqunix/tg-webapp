<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Проверка Telegram ID</title>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        window.onload = () => {
            const tg = window.Telegram.WebApp;

            tg.expand(); // Разворачиваем на весь экран

            const user = tg.initDataUnsafe?.user;
            if (user) {
                document.body.innerHTML = `
                    <h2>Ваш Telegram ID: ${user.id}</h2>
                    <p>Имя: ${user.first_name} ${user.last_name || ''}</p>
                    <p>Юзернейм: ${user.username || '(нет)'}</p>
                    <button onclick="sendDataToBot(${user.id})">Подтвердить</button>
                `;
            } else {
                document.body.innerHTML = `<p>Не удалось получить данные от Telegram.</p>`;
            }
        };

        function sendDataToBot(userId) {
            fetch(`/verify?id=${userId}`);
            Telegram.WebApp.close();
        }
    </script>
</head>
<body style="font-family: Arial; text-align: center; margin-top: 50px;">
    Загрузка...
</body>
</html>
